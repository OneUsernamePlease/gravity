var z=Object.defineProperty;var I=(n,t,e)=>t in n?z(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var u=(n,t,e)=>I(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();class c{constructor(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}toString(){return`x: ${this.x}, y: ${this.y}`}static add(...t){return t.reduce((e,i)=>({x:e.x+i.x,y:e.y+i.y}),{x:0,y:0})}static subtract(t,e){return{x:t.x-e.x,y:t.y-e.y}}static scale(t,e){return{x:t.x*e,y:t.y*e}}static dotProduct(t,e){return t.x*e.x+t.y*e.y}static magnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static normalize(t){const e=this.magnitude(t);return e===0?{x:0,y:0}:this.scale(t,1/e)}static distance(t,e){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}static displacementVector(t,e){return this.subtract(e,t)}static hadamardProduct(t,e){return{x:t.x*e.x,y:t.y*e.y}}}class B{constructor(t,e,i,o){u(this,"_mass");u(this,"_radius");u(this,"_color");u(this,"_movable");u(this,"defaultDensity",1);t===void 0&&(t=25),e===void 0&&(e=(3*this.mass/(4*Math.PI*this.defaultDensity))**(1/3)),i===void 0&&(i="white"),o===void 0&&(o=!0),this.mass=t,this.radius=e,this.color=i,this.movable=o}get mass(){return this._mass}set mass(t){this._mass=t}get radius(){return this._radius}set radius(t){this._radius=t}get movable(){return this._movable}set movable(t){this._movable=t}get color(){return this._color}set color(t){CSS.supports("color",t)||(t="white"),this._color=t}}class k{constructor(){u(this,"_objectStates");u(this,"running");u(this,"tickCount");u(this,"_tickLength");u(this,"_g");u(this,"gravityLowerBounds",1);this._objectStates=[],this.running=!1,this.tickCount=0,this._tickLength=10,this._g=1}get objectStates(){return this._objectStates}set objectStates(t){this._objectStates=t}get tickLength(){return this._tickLength}set tickLength(t){this._tickLength=t}get g(){return this._g}set g(t){this._g=Math.max(t,Number.MIN_VALUE)}addObject(t){return t.body.movable||(t.velocity=new c(0,0),t.acceleration=new c(0,0)),this.objectStates.push(t),this.objectStates.length}clearObjects(){this.objectStates=[]}pause(){this.running=!1}nextState(){this.updateAccelerationVectors(),this.objectStates.forEach(t=>{this.updateVelocityAndPosition(t)}),this.tickCount++}updateAccelerationVectors(){const t=new Map;for(let e=0;e<this.objectStates.length;e++)for(let i=e+1;i<this.objectStates.length;i++){const o=this.calculateForceBetweenBodies(e,i),s=c.scale(o,-1);t.set(e,t.has(e)?c.add(t.get(e),o):o),t.set(i,t.has(i)?c.add(t.get(i),s):s)}this.objectStates.forEach((e,i)=>{const o=t.get(i);let s=o!==void 0?o:new c(0,0);s=c.scale(s,1/e.body.mass),e.acceleration=s})}updateVelocityAndPosition(t){const e=this.tickLength/1e3;t.body.movable&&(t.velocity=c.add(t.velocity,c.scale(t.acceleration,e)),t.position=c.add(t.position,c.scale(t.velocity,e)))}calculateForceBetweenBodies(t,e){const i=this.objectStates[t],o=this.objectStates[e],s=c.distance(i.position,o.position);if(s<this.gravityLowerBounds)return new c(0,0);const m=this.g*(i.body.mass*o.body.mass/(s*s)),f=c.normalize(c.subtract(o.position,i.position));return c.scale(f,m)}run(){if(this.running)return;this.running=!0;const t=()=>{this.running&&(setTimeout(t,this.tickLength),this.nextState())};t()}log(t){const e=new Date,i=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),s=e.getSeconds().toString().padStart(2,"0"),m=e.getMilliseconds().toString().padStart(3,"0"),f=`${i}:${o}:${s}.${m}`;console.log(`[${f}] ${t}`)}}document.addEventListener("DOMContentLoaded",C);let a,l,L={fields:[]},d,r,T=25,g=!1,y=1,O=.1;function C(){F(),P(),D(1280,720),r={origin:{x:0,y:0},zoomFactor:1,orientationY:-1},d=new k,document.removeEventListener("DOMContentLoaded",C)}function P(){var n,t,e,i,o,s,m,f;(n=document.getElementById("cvsBtnStartSim"))==null||n.addEventListener("click",K),(t=document.getElementById("cvsBtnToggleSim"))==null||t.addEventListener("click",U),(e=document.getElementById("cvsBtnZoomOut"))==null||e.addEventListener("click",Z),(i=document.getElementById("cvsBtnZoomIn"))==null||i.addEventListener("click",q),(o=document.getElementById("cvsBtnMoveLeft"))==null||o.addEventListener("click",R),(s=document.getElementById("cvsBtnMoveRight"))==null||s.addEventListener("click",V),(m=document.getElementById("cvsBtnMoveUp"))==null||m.addEventListener("click",H),(f=document.getElementById("cvsBtnMoveDown"))==null||f.addEventListener("click",N)}function F(){const n="statusText";let t=1,e=document.getElementById(n+t);for(;e!==null;)L.fields.push(e),t++,e=document.getElementById(n+t)}function h(n,t,e=!1){let i;typeof t=="number"?i=L.fields[t-1]:typeof t=="string"?i=document.getElementById(t):i=L.fields[0],e?i.innerHTML+=n:i.innerHTML=n}function D(n,t){a=document.getElementById("theCanvas"),a.width=n,a.height=t,l=a.getContext("2d"),h(`Canvas dimension: ${n} * ${t}`,5)}function _(n,t,e){e===void 0&&(e="white");let i=c.add(n,t);l.beginPath(),l.lineWidth=3,l.strokeStyle=e,l.moveTo(n.x,n.y),l.lineTo(i.x,i.y),l.stroke()}function $(n,t){let e=Math.max(n.radius/r.zoomFactor,1);l.beginPath(),l.arc(t.x,t.y,e,0,Math.PI*2),l.closePath(),l.fillStyle=n.color,l.fill()}function j(){d.objectStates.forEach(t=>{t!==null&&$(t.body,b(t.position))})}function p(){l.clearRect(0,0,a.width,a.height),j(),A()}function A(){d.objectStates.forEach(n=>{_(b(n.position),M(n.acceleration),"green"),_(b(n.position),M(n.velocity),"red")})}function b(n){const t=c.subtract(n,r.origin),e={x:t.x,y:t.y*-1};return c.scale(e,1/r.zoomFactor)}function M(n){const t={x:n.x,y:n.y*-1};return c.scale(t,1/r.zoomFactor)}function x(n){r.origin=n,g||p()}function V(){let n=S("horizontal");x({x:r.origin.x+n,y:r.origin.y})}function R(){let n=S("horizontal");x({x:r.origin.x-n,y:r.origin.y})}function H(){let n=S("vertical");x({x:r.origin.x,y:r.origin.y+n})}function N(){let n=S("vertical");x({x:r.origin.x,y:r.origin.y-n})}function S(n,t){switch(t===void 0&&(t=O),n){case"horizontal":return a.width*t*y;case"vertical":return a.height*t*y}}function Z(){const n={x:a.width/2,y:a.height/2},t=r.zoomFactor+y;let e=c.scale(n,y);r.origin={x:r.origin.x-e.x,y:r.origin.y+e.y},r.zoomFactor=t,h(`Zoom: ${t} (m per pixel)`,4),g||p()}function q(){if(r.zoomFactor<=1)return;let n={x:a.width/2,y:a.height/2},t=r.zoomFactor-y,e=c.scale(n,y);r.origin={x:r.origin.x+e.x,y:r.origin.y-e.y},r.zoomFactor=t,h(`Zoom: ${t} (m per pixel)`,4),g||p()}function J(){a.width,a.height;let n={x:640,y:-360},t={x:1140,y:-410},e={x:1010,y:0},i={x:0,y:0},o={x:-110,y:-110},s={x:-150,y:-150};w(v(1e7,50),n,i),w(v(1e3,10),t,o),w(v(1e3,10),e,s)}function U(n){d.running?(g=!1,d.pause(),document.getElementById("cvsBtnToggleSim").innerHTML="Resume",h("Simulation paused",1)):(document.getElementById("cvsBtnToggleSim").innerHTML="Pause",W(),E(),h("Simulation running",1))}function w(n,t,e,i){n===void 0&&(n=v()),t===void 0&&(t={x:0,y:0}),e===void 0&&(e={x:0,y:0});const o={body:n,position:t,velocity:e,acceleration:{x:0,y:0}};d.addObject(o)}function K(){d.clearObjects(),d.tickCount=0,h("Simulation running",1),document.getElementById("cvsBtnToggleSim").innerHTML="Pause",J(),d.run(),E()}function W(){d.running||(d.run(),E())}function E(){if(g)return;g=!0;const n=()=>{g&&(p(),h(`Simulation Tick: ${d.tickCount}`,2),setTimeout(n,T))};n()}function v(n,t){let e;return n===void 0&&t===void 0?e=new B(Y(20,200)):t===void 0?e=new B(n):e=new B(n,t),e}function Y(n,t){return Math.floor(Math.random()*(t-n+1)+n)}
//# sourceMappingURL=index-oCsXMGfx.js.map
