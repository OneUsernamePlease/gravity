var O=Object.defineProperty;var V=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var d=(e,t,n)=>V(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();class r{constructor(t,n){t===void 0&&(t=0),n===void 0&&(n=0),this.x=t,this.y=n}toString(){return`x: ${this.x}, y: ${this.y}`}static add(...t){return t.reduce((n,i)=>({x:n.x+i.x,y:n.y+i.y}),{x:0,y:0})}static subtract(t,n){return{x:t.x-n.x,y:t.y-n.y}}static scale(t,n){return{x:t.x*n,y:t.y*n}}static dotProduct(t,n){return t.x*n.x+t.y*n.y}static magnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static normalize(t){const n=this.magnitude(t);return n===0?{x:0,y:0}:this.scale(t,1/n)}static distance(t,n){return Math.sqrt((n.x-t.x)**2+(n.y-t.y)**2)}static displacementVector(t,n){return this.subtract(n,t)}static hadamardProduct(t,n){return{x:t.x*n.x,y:t.y*n.y}}}const v=class v{constructor(t,n,i,o){d(this,"_mass");d(this,"_radius");d(this,"_color");d(this,"_movable");t===void 0&&(t=25),n===void 0&&(n=(3*t/(4*Math.PI*v.defaultDensity))**(1/3)),i===void 0&&(i="white"),o===void 0&&(o=!0),this.mass=t,this.radius=n,this.color=i,this.movable=o}get mass(){return this._mass}set mass(t){this._mass=t}get radius(){return this._radius}set radius(t){this._radius=t}get movable(){return this._movable}set movable(t){this._movable=t}get color(){return this._color}set color(t){CSS.supports("color",t)||(t="white"),this._color=t}};d(v,"defaultDensity",1);let y=v;class j{constructor(){d(this,"_objectStates");d(this,"running");d(this,"tickCount");d(this,"_tickLength");d(this,"_g");d(this,"gravityLowerBounds",1);this._objectStates=[],this.running=!1,this.tickCount=0,this._tickLength=10,this._g=1}get objectStates(){return this._objectStates}set objectStates(t){this._objectStates=t}get tickLength(){return this._tickLength}set tickLength(t){this._tickLength=t}get g(){return this._g}set g(t){this._g=Math.max(t,Number.MIN_VALUE)}addObject(t){return t.body.movable||(t.velocity=new r(0,0),t.acceleration=new r(0,0)),this.objectStates.push(t),this.objectStates.length}clearObjects(){this.objectStates=[]}pause(){this.running=!1}nextState(){this.updateAccelerationVectors(),this.objectStates.forEach(t=>{this.updateVelocityAndPosition(t)}),this.tickCount++}updateAccelerationVectors(){const t=new Map;for(let n=0;n<this.objectStates.length;n++)for(let i=n+1;i<this.objectStates.length;i++){const o=this.calculateForceBetweenBodies(n,i),s=r.scale(o,-1);t.set(n,r.add(t.get(n)||new r(0,0),o)),t.set(i,r.add(t.get(i)||new r(0,0),s))}this.objectStates.forEach((n,i)=>{const o=t.get(i);let s=o!==void 0?o:new r(0,0);s=r.scale(s,1/n.body.mass),n.acceleration=s})}updateVelocityAndPosition(t){const n=this.tickLength/1e3;t.body.movable&&(t.velocity=r.add(t.velocity,r.scale(t.acceleration,n)),t.position=r.add(t.position,r.scale(t.velocity,n)))}calculateForceBetweenBodies(t,n){const i=this.objectStates[t],o=this.objectStates[n],s=r.distance(i.position,o.position);if(s<this.gravityLowerBounds||s===0)return new r(0,0);const u=this.g*(i.body.mass*o.body.mass/(s*s)),h=r.normalize(r.subtract(o.position,i.position));return r.scale(h,u)}run(){if(this.running)return;this.running=!0;const t=()=>{this.running&&(setTimeout(t,this.tickLength),this.nextState())};t()}log(t){const n=new Date,i=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),s=n.getSeconds().toString().padStart(2,"0"),u=n.getMilliseconds().toString().padStart(3,"0"),h=`${i}:${o}:${s}.${u}`;console.log(`[${h}] ${t}`)}}function N(e){return e=e.trim(),!isNaN(+e)&&e.length!==0}function H(e){let t=document.getElementById(e);return t instanceof HTMLInputElement?t.value.trim():""}function b(e){let t=H(e);return N(t)?+t:0}var k=(e=>(e[e.None=0]="None",e[e.AddBody=1]="AddBody",e[e.ScrollCvs=2]="ScrollCvs",e))(k||{}),T=(e=>(e[e.Up=0]="Up",e[e.Down=1]="Down",e))(T||{});let a,l,L={fields:[]},m,c,R=25,g=!1,p=1,A=.1,S=0;document.addEventListener("DOMContentLoaded",D);function D(){Y(),U(),W(1280,720),c={origin:{x:0,y:0},zoomFactor:1,orientationY:-1},m=new j,document.removeEventListener("DOMContentLoaded",D)}function U(){var e,t,n,i,o,s,u,h,z,P;(e=document.getElementById("cvsBtnStartSim"))==null||e.addEventListener("click",lt),(t=document.getElementById("cvsBtnToggleSim"))==null||t.addEventListener("click",at),(n=document.getElementById("cvsBtnZoomOut"))==null||n.addEventListener("click",st),(i=document.getElementById("cvsBtnZoomIn"))==null||i.addEventListener("click",rt),(o=document.getElementById("cvsBtnScrollLeft"))==null||o.addEventListener("click",nt),(s=document.getElementById("cvsBtnScrollRight"))==null||s.addEventListener("click",et),(u=document.getElementById("cvsBtnScrollUp"))==null||u.addEventListener("click",it),(h=document.getElementById("cvsBtnScrollDown"))==null||h.addEventListener("click",ot),(z=document.getElementById("theCanvas"))==null||z.addEventListener("mousedown",Z),(P=document.getElementById("theCanvas"))==null||P.addEventListener("mouseup",q)}function Z(e){if(e.button!==0)return;S=1;const t=J(e);let n=document.querySelector('input[name="cvsRdbMouseAction"]:checked').value;switch(k[n]){case 0:F("LMouse Button:"+T[S]+" - at Position: "+t.toString());break;case 1:let i=K(),o=new r(b("xVelocityInput"),b("yVelocityInput"));I(i,tt(t),o);break}}function q(e){e.button===0&&(S=0,F("LMouse Button:"+T[S]))}function J(e){const t=a.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return new r(n,i)}function Y(){const e="statusText";let t=1,n=document.getElementById(e+t);for(;n!==null;)L.fields.push(n),t++,n=document.getElementById(e+t)}function K(){const e=b("massInput");return new y(e)}function f(e,t,n=!1){let i;typeof t=="number"?i=L.fields[t-1]:typeof t=="string"?i=document.getElementById(t):i=L.fields[0],n?i.innerHTML+=e:i.innerHTML=e}function W(e,t){a=document.getElementById("theCanvas"),a.width=e,a.height=t,l=a.getContext("2d"),f(`Canvas dimension: ${e} * ${t}`,5)}function F(e){const t=new Date,n=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0"),s=t.getMilliseconds().toString().padStart(3,"0"),u=`${n}:${i}:${o}.${s}`;console.log(`[${u}] ${e}`)}function C(e,t,n){n===void 0&&(n="white");let i=r.add(e,t);l.beginPath(),l.lineWidth=3,l.strokeStyle=n,l.moveTo(e.x,e.y),l.lineTo(i.x,i.y),l.stroke()}function X(e,t){let n=Math.max(e.radius/c.zoomFactor,1);l.beginPath(),l.arc(t.x,t.y,n,0,Math.PI*2),l.closePath(),l.fillStyle=e.color,l.fill()}function G(){m.objectStates.forEach(t=>{t!==null&&X(t.body,E(t.position))})}function x(){l.clearRect(0,0,a.width,a.height),G(),Q()}function Q(){m.objectStates.forEach(e=>{C(E(e.position),$(e.acceleration),"green"),C(E(e.position),$(e.velocity),"red")})}function E(e){const t=r.subtract(e,c.origin),n={x:t.x,y:t.y*-1};return r.scale(n,1/c.zoomFactor)}function $(e){const t={x:e.x,y:e.y*-1};return r.scale(t,1/c.zoomFactor)}function tt(e){let t;return t=r.add(r.hadamardProduct(r.scale(e,c.zoomFactor),{x:1,y:c.orientationY}),c.origin),t}function w(e){c.origin=e,g||x()}function et(){let e=B("horizontal");w({x:c.origin.x+e,y:c.origin.y})}function nt(){let e=B("horizontal");w({x:c.origin.x-e,y:c.origin.y})}function it(){let e=B("vertical");w({x:c.origin.x,y:c.origin.y+e})}function ot(){let e=B("vertical");w({x:c.origin.x,y:c.origin.y-e})}function B(e,t){switch(t===void 0&&(t=A),e){case"horizontal":return a.width*t*p;case"vertical":return a.height*t*p}}function st(){const e={x:a.width/2,y:a.height/2},t=c.zoomFactor+p;let n=r.scale(e,p);c.origin={x:c.origin.x-n.x,y:c.origin.y+n.y},c.zoomFactor=t,f(`Zoom: ${t} (m per pixel)`,4),g||x()}function rt(){if(c.zoomFactor<=1)return;let e={x:a.width/2,y:a.height/2},t=c.zoomFactor-p,n=r.scale(e,p);c.origin={x:c.origin.x+n.x,y:c.origin.y-n.y},c.zoomFactor=t,f(`Zoom: ${t} (m per pixel)`,4),g||x()}function ct(){a.width,a.height;let e={x:640,y:-360},t={x:1140,y:-410},n={x:0,y:0},i={x:-110,y:-110};I(M(1e7,50),e,n),I(M(1e6,40),t,i)}function at(e){m.running?(g=!1,m.pause(),document.getElementById("cvsBtnToggleSim").innerHTML="Resume",f("Simulation paused",1)):(document.getElementById("cvsBtnToggleSim").innerHTML="Pause",ut(),_(),f("Simulation running",1))}function I(e,t,n,i){e===void 0&&(e=M()),t===void 0&&(t={x:0,y:0}),n===void 0&&(n={x:0,y:0});const o={body:e,position:t,velocity:n,acceleration:{x:0,y:0}};m.addObject(o)}function lt(){m.clearObjects(),m.tickCount=0,f("Simulation running",1),document.getElementById("cvsBtnToggleSim").innerHTML="Pause",ct(),m.run(),_()}function ut(){m.running||(m.run(),_())}function _(){if(g)return;g=!0;const e=()=>{g&&(setTimeout(e,R),x(),f(`Simulation Tick: ${m.tickCount}`,2))};e()}function M(e,t){let n;return e===void 0?n=new y(dt(20,200)):t===void 0?n=new y(e):n=new y(e,t),n}function dt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}
//# sourceMappingURL=index-DO7XeseH.js.map
